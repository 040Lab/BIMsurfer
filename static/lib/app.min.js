(function(){var a,b,c,d,e,f,g,h,i,j;f=function(a){return[a.x,a.y,a.z]},g=function(a){return[a.x,a.y,a.z,a.w]},i=function(a){return{x:a[0],y:a[1],z:a[2]}},j=function(a){return{x:a[0],y:a[1],z:a[2],w:a[3]}},d=function(a,b){var c,d,e,g,h,j,k,l,m,n,o,p,q,r;return e=f(b.eye),q=f(b.up),k=f(b.look),j=SceneJS_math_lenVec3(e),g=[0,0,0],SceneJS_math_mulVec3Scalar(e,1/j,g),n=[0,0,0],SceneJS_math_cross3Vec3(e,q,n),o=SceneJS_math_normalizeVec3(n),c=[o[0]*a[0]+o[1]*a[0],g[0]*a[1]+g[1]*a[1]],d=SceneJS_math_lenVec2(a),m=SceneJS_math_rotationMat4v(d,c),h=SceneJS_math_transformVector3(m,e),p=SceneJS_math_transformVector3(m,n),p[1]=0,r=[0,0,0],SceneJS_math_cross3Vec3(h,p,r),l={eye:i(h),up:i(r)}},e=function(a,b){return d(a,{eye:b.get("eye"),look:b.get("look"),up:b.get("up")})},h={scene:SceneJS.scene("Scene"),canvas:document.getElementById("scenejsCanvas"),viewport:{selectedElement:null,mouse:{last:[0,0],leftDragging:!1,middleDragging:!1}}},h.scene.start(),a=function(a){h.viewport.mouse.last=[a.clientX,a.clientY];switch(a.which){case 1:return h.viewport.mouse.leftDragging=!0;case 2:return h.viewport.mouse.middleDragging=!0}},c=function(a){return h.viewport.mouse.leftDragging=!1,h.viewport.mouse.middleDragging=!1},b=function(a){var b,c;return h.viewport.mouse.middleDragging&&(b=[a.clientX-h.viewport.mouse.last[0],a.clientY-h.viewport.mouse.last[0]],c=h.scene.findNode("main-lookAt")),h.viewport.mouse.last=[a.clientX,a.clientY]},h.canvas.addEventListener("mousedown",a,!0),h.canvas.addEventListener("mouseup",c,!0),h.canvas.addEventListener("mousemove",b,!0)}).call(this)